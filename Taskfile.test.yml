version: "3"

vars:
  GLOBAL: "GLOBAL"

tasks:
  simple:
    desc: Simple command
    cmds:
      - echo "run simple command"

  with-vars:
    desc: Command with vars
    silent: true
    cmds:
      - echo "OPTIONAL={{.OPTIONAL}} VALUE={{.VALUE}}"
    vars:
      OPTIONAL: "{{.OPTIONAL}}"
      VALUE: "bar"

  with-default-vars:
    desc: Command with vars
    silent: true
    cmds:
      - echo "DEFAULT1={{.DEFAULT1}} DEFAULT2={{.DEFAULT2}} DEFAULT3={{.DEFAULT3}} DEFAULT4={{.DEFAULT4}}"
    vars:
      DEFAULT1: '{{.DEFAULT1 | default "default1"}}'
      DEFAULT2: '{{ .DEFAULT2 | default "default2" }}'
      DEFAULT3: '{{.DEFAULT3|default "default3"}}'
      DEFAULT4: '{{ .DEFAULT4|default "default4" }}'

  with-requires:
    desc: Command with requires
    silent: true
    cmds:
      - echo "REQUIRED={{.REQUIRED}}"
    requires:
      vars: [ REQUIRED ]

  with-vars-and-requires:
    desc: Command with vars and requires
    silent: true
    cmds:
      - echo "OPTIONAL={{.OPTIONAL}} VALUE={{.VALUE}}"
      - echo "REQUIRED={{.REQUIRED}}"
    vars:
      OPTIONAL: "{{.OPTIONAL}}"
      VALUE: "bar"
    requires:
      vars: [ REQUIRED ]

  with-vars-and-requires-and-long-var:
    desc: Command with vars and requires and long var
    silent: true
    cmds:
      - echo "OPTIONAL={{.OPTIONAL}} VALUE={{.VALUE}} LOOOOOOOOOOOOOOOOOONG_OPTIONAL2={{.LOOOOOOOOOOOOOOOOOONG_OPTIONAL2}}"
      - echo "REQUIRED={{.REQUIRED}}"
    vars:
      OPTIONAL: "{{.OPTIONAL}}"
      VALUE: "bar"
      LOOOOOOOOOOOOOOOOOONG_OPTIONAL2: "{{.LOOOOOOOOOOOOOOOOOONG_OPTIONAL2}}"
    requires:
      vars: [ REQUIRED ]
